"use strict";function RNG(t){this.m=2147483648,this.a=1103515245,this.c=12345,this.state=t||Math.floor(Math.random()*(this.m-1))}angular.module("app",[]),angular.module("app").controller("RoleController",["$scope",function(t){var e=this;this.started=!1,this.numberOfPlayers=12,this.seed=1023,this.spyPlayerIndex1=-1,this.spyPlayerIndex2=-1,$.getJSON("scenarios.json",function(n){e.scenarios=n,e.locations=_.map(n,"location"),t.$apply()});var n=function(){for(var t=[],n=0;n<e.numberOfPlayers;n++)if(n===e.spyPlayerIndex1||n===e.spyPlayerIndex2)t.push({role:"Spy",location:null});else{var o=e.scenario.roles[(n+e.playerRoleOffset)%e.scenario.roles.length];t.push({role:o,location:e.scenario.location})}return t};this.start=function(){e.started=!0;var t=new RNG(e.seed),o=Math.floor(t.nextFloat()*(e.locations.length-1));if(e.scenario=e.scenarios[o],e.playerRoleOffset=Math.floor(t.nextFloat()*(e.scenario.roles.length-1)),e.spyPlayerIndex1=Math.floor(t.nextFloat()*(e.numberOfPlayers-1)),e.numberOfPlayers>=9)for(e.spyPlayerIndex2=Math.floor(t.nextFloat()*(e.numberOfPlayers-1));e.spyPlayerIndex2===e.spyPlayerIndex1;)e.spyPlayerIndex2=Math.floor(t.nextFloat()*(e.numberOfPlayers-1));e.players=n()},this.resetScroll=function(){window.scrollTo(0,0)}}]),RNG.prototype.nextInt=function(){return this.state=(this.a*this.state+this.c)%this.m,this.state},RNG.prototype.nextFloat=function(){return this.nextInt()/(this.m-1)},RNG.prototype.nextRange=function(t,e){var n=e-t,o=this.nextInt()/this.m;return t+Math.floor(o*n)},RNG.prototype.choice=function(t){return t[this.nextRange(0,t.length)]};